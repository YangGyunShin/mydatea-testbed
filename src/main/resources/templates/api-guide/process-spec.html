<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default-layout}">
<head>
    <title>마이데이터 참여자별 API 처리 절차</title>
    <th:block layout:fragment="css">
        <link rel="stylesheet" th:href="@{/css/sub-page.css}">
        <link rel="stylesheet" th:href="@{/css/sidebar.css}">
        <link rel="stylesheet" th:href="@{/css/api-guide.css}">
    </th:block>
</head>
<body>
<main layout:fragment="content">
    <!-- 페이지 배너 -->
    <th:block th:replace="~{fragments/page-banner :: page-banner('API가이드', '금융분야 마이데이터 표준 API 규격을 안내합니다')}"></th:block>

    <!-- 브레드크럼 -->
    <th:block th:replace="~{fragments/breadcrumb :: breadcrumb(${breadcrumbItems})}"></th:block>

    <!-- 서브 페이지 레이아웃 -->
    <div class="sub-page-layout">
        <!-- 사이드바 (아코디언) -->
        <th:block th:replace="~{layout/sidebar-api-spec :: sidebar-api-spec(${activeGroup}, ${currentMenu})}"></th:block>

        <!-- 메인 콘텐츠 -->
        <div class="sub-page-main">
            <h2 class="content-title">마이데이터 참여자별 API 처리 절차</h2>

            <!-- ==================== 3-1. 사전준비 ==================== -->
            <h3 class="spec-section-title">3-1. 사전준비</h3>

            <!-- 1) 기관정보 등록 -->
            <h4 class="spec-subsection-title">1) 기관정보 등록 (마이데이터사업자/정보제공자/중계기관/통합인증기관)</h4>

            <div class="spec-item">
                <p class="spec-item-desc">
                    ① 종합포털의 절차에 따라 회원가입 및 기관정보(기관명, TLS 인증서 정보, 도메인명 등) 등록
                </p>
                <p class="spec-item-desc">- 종합포털은 기관코드를 발급(따라서 중계기관 및 중계기관을 이용하는 기관도 종합포털에 기관 등록 필요)</p>

                <div class="spec-term-box">
                    <p class="spec-term-name">TLS 인증서 정보 등록</p>
                    <p class="spec-term-desc">
                        기관간 상호인증, 데이터 암호화 송·수신을 위해 기관들은 mutual TLS를 적용하여야 하는데, 이를 위해 각 기관이 공인된 CA기관으로부터 발급받은 TLS 인증서(EV등급) 정보*를 종합포털에 등록
                    </p>
                    <p class="spec-note">
                        * TLS 인증서 내 SERIALNUMBER에 기재된 기관등록번호(사업자등록번호)를 등록함으로써, TLS 인증서를 추후 재발급받더라도 SERIALNUMBER가 동일한 경우 종합포털에 재등록 불필요<br>
                        * 각 기관은 TLS 상호인증 시 SERIALNUMBER 검증 필요
                    </p>
                </div>

                <p class="spec-item-desc" style="margin-top: 16px;">
                    ② 마이데이터사업자, API를 직접 구축한 정보제공자 및 중계기관은 종합포털로부터 지원API 호출용 자격증명 및 지원API 제공용 자격증명을 발급받아, 기관 내 시스템 등에 반영
                </p>

                <div class="spec-term-box">
                    <p class="spec-term-name">- 지원API 호출용 자격증명</p>
                    <p class="spec-term-desc">마이데이터사업자, 정보제공자 또는 중계기관이 지원API를 호출(종합포털이 API제공)하기 위한 접근토큰 발급 시 필요한 자격증명</p>
                    <p class="spec-term-name" style="margin-top: 12px;">- 지원API 제공용 자격증명</p>
                    <p class="spec-term-desc">종합포털이 지원API를 호출(마이데이터사업자, 정보제공자 또는 중계기관이 API제공)하기 위한 접근토큰 발급 시 필요한 자격증명</p>
                </div>

                <p class="spec-item-desc" style="margin-top: 16px;">
                    ③ API를 직접 구축한 정보제공자 및 중계기관은 종합포털로부터 통합인증 API 호출용 자격증명을 발급받아, 기관 내 시스템 등에 반영
                </p>

                <div class="spec-term-box">
                    <p class="spec-term-name">- 통합인증 API 호출용 자격증명</p>
                    <p class="spec-term-desc">정보제공자, 중계기관이 통합인증 API를 호출(통합인증기관이 API 제공)하기 위한 접근토큰 발급 시 필요한 자격증명</p>
                </div>

                <p class="spec-item-desc" style="margin-top: 16px;">
                    ④ 통합인증기관은 종합포털로부터 지원 API 호출용 자격증명을 발급받아, 기관 내 시스템 등에 반영
                </p>
            </div>

            <hr class="spec-divider">

            <!-- 2) 서비스정보 등록 -->
            <h4 class="spec-subsection-title">2) 서비스정보 등록 (마이데이터 사업자)</h4>

            <div class="spec-item">
                <p class="spec-item-desc">① 종합포털의 절차에 따라 서비스정보(서비스명, Callback URL 등) 등록</p>
                <p class="spec-item-desc">② 종합포털로부터 서비스 자격증명을 발급받아, 기관 내 시스템 등에 반영</p>

                <div class="spec-term-box">
                    <p class="spec-term-name">- 서비스 자격증명</p>
                    <p class="spec-term-desc">마이데이터사업자가 정보제공API를 호출(정보제공자가 API제공)하기 위한 접근토큰 발급 시 필요한 자격증명</p>
                </div>
            </div>

            <hr class="spec-divider">

            <!-- 3) 종합포털과 접속 채널 등 설정 -->
            <h4 class="spec-subsection-title">3) 종합포털과 접속 채널 등 설정 (마이데이터사업자/정보제공자/중계기관/통합인증기관)</h4>

            <div class="spec-item">
                <p class="spec-item-desc">
                    안전한 지원API 호출을 위해 마이데이터사업자, API를 직접 구축한 정보제공자, 중계기관 및 통합인증기관은 종합포털 IP 접근제어(방화벽 등록 등) 및 TLS 인증서 정보를 기관 내 시스템 등에 반영
                </p>
            </div>

            <hr class="spec-divider">

            <!-- 4) 기관정보/서비스정보 수신 -->
            <h4 class="spec-subsection-title">4) 기관정보/서비스정보 수신 (마이데이터사업자/데이터보유자/중계기관/통합인증기관)</h4>

            <div class="spec-item">
                <p class="spec-item-desc">
                    ① 마이데이터사업자, API를 직접 구축한 정보제공자 및 중계기관, 통합인증기관은 "지원API 호출용 자격증명"을 이용하여 종합포털에 OAuth 2.0 인증(지원-001 API 호출) 후 종합포털이 발급한 접근토큰을 획득
                </p>

                <!-- 지원-001 API -->
                <table class="spec-table">
                    <tbody>
                        <tr><th style="width: 20%;">API ID</th><td>지원-001</td></tr>
                        <tr><th>API명 (URI)</th><td>/oauth/2.0/token</td></tr>
                        <tr><th>API 설명</th><td>지원API 호출을 위한 접근토큰 발급</td></tr>
                        <tr><th>API 제공자</th><td>종합포털</td></tr>
                        <tr><th>요청 정보</th><td>지원API 호출용 자격증명</td></tr>
                        <tr><th>응답 정보</th><td>접근토큰</td></tr>
                    </tbody>
                </table>

                <p class="spec-item-desc" style="margin-top: 16px;">
                    ② 마이데이터사업자, API를 직접 구축한 정보제공자 및 중계기관은 발급받은 접근토큰을 이용하여 종합포털로부터 기관정보(지원-002 API 호출) 및 서비스정보(지원-003 API 호출) 수신
                </p>

                <!-- 지원-002 API -->
                <table class="spec-table">
                    <tbody>
                        <tr><th style="width: 20%;">API ID</th><td>지원-002</td></tr>
                        <tr><th>API명 (URI)</th><td>/mgmts/orgs</td></tr>
                        <tr><th>API 설명</th><td>기관 정보 조회</td></tr>
                        <tr><th>API 제공자</th><td>종합포털</td></tr>
                        <tr><th>요청 정보</th><td>접근토큰, 조회 타임스탬프</td></tr>
                        <tr><th>응답 정보</th><td>기관정보</td></tr>
                    </tbody>
                </table>

                <!-- 지원-003 API -->
                <table class="spec-table">
                    <tbody>
                        <tr><th style="width: 20%;">API ID</th><td>지원-003</td></tr>
                        <tr><th>API명 (URI)</th><td>/mgmts/services</td></tr>
                        <tr><th>API 설명</th><td>마이데이터 사업자 서비스 정보 조회</td></tr>
                        <tr><th>API 제공자</th><td>종합포털</td></tr>
                        <tr><th>요청 정보</th><td>접근토큰, 조회 타임스탬프</td></tr>
                        <tr><th>응답 정보</th><td>서비스 정보</td></tr>
                    </tbody>
                </table>

                <p class="spec-note" style="margin-top: 8px;">
                    - 기관 또는 서비스 신규·변경·삭제 정보 반영을 위해 필요 시 본 API를 비정기적으로 호출하여야 함<br>
                    - 다만 마이데이터 산업 초기에 빈번한 API 호출을 방지하기 위해 참여자들이 기관·서비스 정보를 사전에 등록하는 기간·절차를 마련할 필요
                </p>

                <p class="spec-item-desc" style="margin-top: 16px;">
                    ③ 통합인증기관은 발급받은 접근토큰을 이용하여 종합포털로부터 기관정보(지원-002 API 호출) 및 정보제공자/중계기관의 통합인증 API 호출용 자격증명(지원-005 API 호출) 수신
                </p>

                <!-- 지원-005 API -->
                <table class="spec-table">
                    <tbody>
                        <tr><th style="width: 20%;">API ID</th><td>지원-005</td></tr>
                        <tr><th>API명 (URI)</th><td>/mgmts/ca_credentials</td></tr>
                        <tr><th>API 설명</th><td>통합인증 API 호출용 자격증명 조회</td></tr>
                        <tr><th>API 제공자</th><td>종합포털</td></tr>
                        <tr><th>요청 정보</th><td>접근토큰, 조회 타임스탬프</td></tr>
                        <tr><th>응답 정보</th><td>정보제공자 및 중계기관의 "통합인증 API 호출용 자격증명" 정보</td></tr>
                    </tbody>
                </table>
            </div>

            <hr class="spec-divider">

            <!-- 5) 통합인증 이용 준비 -->
            <h4 class="spec-subsection-title">5) 통합인증 이용 준비 (마이데이터사업자/정보제공자/중계기관/통합인증기관)</h4>

            <div class="spec-item">
                <p class="spec-item-desc">
                    ① 마이데이터사업자, API를 직접 구축한 정보제공자 및 중계기관, 통합인증기관은 통합인증 참여시 각 기관 간의 역할 및 관계, 책임소재 등을 포함하는 "금융분야 마이데이터 통합인증 공동업무규약(가칭)" 참가
                </p>

                <p class="spec-item-desc" style="margin-top: 12px;">
                    ② 마이데이터사업자는 통합인증기관이 발급한 통합인증서(PKI)에 기반하여 통합인증을 수행할 수 있도록 전자서명 생성 모듈을 서비스 내에 설치하거나, 외부의 전자서명 생성 모듈을 호출하여 전자서명 생성을 요청할 수 있도록 연동 기능을 준비
                </p>

                <!-- 통합인증서 종류별 테이블 -->
                <table class="spec-table" style="margin-top: 12px;">
                    <thead>
                        <tr>
                            <th>구분</th>
                            <th>공동인증서</th>
                            <th>그 외 인증서</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>인증서 예시</td>
                            <td>범용, 은행/증권용 공동인증서</td>
                            <td>금융인증서, 그 외 별도 인증앱 등에 저장된 인증서</td>
                        </tr>
                        <tr>
                            <td>전자서명 생성 모듈 제공자</td>
                            <td>본인확인 및 인증 솔루션 기업 등</td>
                            <td>해당 통합인증기관</td>
                        </tr>
                        <tr>
                            <td>관리 주체</td>
                            <td>마이데이터사업자</td>
                            <td>해당 통합인증기관</td>
                        </tr>
                        <tr>
                            <td>준비 필요사항</td>
                            <td>전자서명 생성 모듈 설치</td>
                            <td>전자서명 생성 모듈 호출(연동) 준비</td>
                        </tr>
                    </tbody>
                </table>

                <p class="spec-item-desc" style="margin-top: 16px;">
                    ③ API를 직접 구축한 정보제공자 및 중계기관은 마이데이터사업자로부터 전송받은 정보주체 본인확인 목적의 전자서명을 본인확인 요청 메시지로 변환하여 통합인증기관으로 전송하기 위한 본인확인 요청 모듈과 전자서명 검증 모듈을 설치 및 준비
                </p>

                <p class="spec-item-desc" style="margin-top: 12px;">
                    ④ 통합인증기관을 이용하여 통합인증을 수행하는 정보제공자 및 중계기관은 "통합인증 API 호출용 자격증명"을 이용하여 통합인증기관에 OAuth 2.0 인증(통합인증-001 API 호출) 후 통합인증기관이 발급한 접근토큰을 획득
                </p>
            </div>

            <hr class="spec-divider">

            <!-- 6) 기관 간 접속 채널 등 설정 -->
            <h4 class="spec-subsection-title">6) 기관 간 접속 채널 등 설정 (마이데이터사업자/정보제공자/중계기관/통합인증기관)</h4>

            <div class="spec-item">
                <p class="spec-item-desc">
                    안전한 API 호출을 위해 종합포털로부터 수신한 기관정보 및 서비스정보 등을 이용하여 IP 접근제어(방화벽 등록 등) 및 TLS 인증서 정보를 기관 내 시스템 등에 반영
                </p>

                <table class="spec-table" style="margin-top: 12px;">
                    <thead>
                        <tr>
                            <th>구분</th>
                            <th>마이데이터 사업자</th>
                            <th>정보제공자<br>(API 직접 구축)</th>
                            <th>중계기관</th>
                            <th>통합인증기관</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>마이데이터사업자</td>
                            <td></td>
                            <td>O*</td>
                            <td>O</td>
                            <td>O</td>
                        </tr>
                        <tr>
                            <td>정보제공자(API 직접 구축)</td>
                            <td>O</td>
                            <td></td>
                            <td></td>
                            <td>O</td>
                        </tr>
                        <tr>
                            <td>중계기관</td>
                            <td>O</td>
                            <td></td>
                            <td></td>
                            <td>O</td>
                        </tr>
                        <tr>
                            <td>통합인증기관</td>
                            <td></td>
                            <td>O</td>
                            <td>O</td>
                            <td></td>
                        </tr>
                    </tbody>
                </table>
                <p class="spec-note">* 마이데이터 서비스 가입현황 조회를 위해 필요 예상 (추후 검토 후 반영)</p>
            </div>

            <hr class="spec-divider">

            <!-- ==================== 3.2 개인신용정보 전송요구·변경·철회 ==================== -->
            <h3 class="spec-section-title">3.2 개인신용정보 전송요구·변경·철회</h3>

            <p class="spec-item-desc">개인신용정보 전송요구는 정보주체 인증방식인 개별인증 및 통합인증에 따라 절차가 상이하여 각각을 구분하여 설명함</p>

            <!-- 3.2.1 개별인증 시 -->
            <h4 class="spec-subsection-title">3.2.1 개별인증 시</h4>

            <h4 class="spec-subsection-title" style="font-size: 1rem;">3.2.1.1 개인신용정보 전송요구 또는 전송요구 변경</h4>

            <div class="spec-item">
                <p class="spec-item-desc">
                    정보주체가 개별인증 방식을 통하여 정보제공자로 하여금 본인의 개인신용정보를 마이데이터사업자에게 전송해줄 것을 요구하기 위해서는 다음과 같은 절차를 거침
                </p>

                <!-- ⓐ 인가코드 발급 -->
                <div class="spec-term-box" style="margin-top: 16px;">
                    <p class="spec-term-name">ⓐ 인가코드 발급</p>
                    <p class="spec-term-desc">
                        - 정보주체가 정보제공자에게 본인임을 개별인증을 통해 인증하고, 전송요구할 자산을 선택하여 전송요구권(신청 또는 변경)을 행사<br>
                        - 정보제공자는 인증 및 전송요구가 성공적으로 완료되면 인가코드를 발급하여 마이데이터사업자에게 전달
                    </p>
                </div>

                <div class="spec-term-box" style="margin-top: 8px;">
                    <p class="spec-term-name">ⓑ 접근토큰 발급</p>
                    <p class="spec-term-desc">
                        - 마이데이터사업자는 인가코드를 이용하여 정보제공자에게 접근토큰 발급을 요청<br>
                        - 정보제공자는 정보주체의 전송요구 내역을 기반으로 권한(scope)을 설정하고 마이데이터사업자에게 접근토큰을 발급
                    </p>
                </div>

                <div class="spec-term-box" style="margin-top: 8px;">
                    <p class="spec-term-name">ⓒ 개인신용정보 전송요구 내역 조회</p>
                    <p class="spec-term-desc">
                        - 마이데이터사업자는 발급된 접근토큰을 이용하여 전송요구 내역을 조회
                    </p>
                </div>
            </div>

            <!-- ⓐ 인가코드 발급 상세 -->
            <div class="spec-item" style="margin-top: 24px;">
                <p class="spec-item-title"><strong>ⓐ 인가코드 발급</strong></p>

                <div class="spec-scenario">
                    <div class="spec-scenario-step">
                        <span class="step-label">① (정보주체)</span> 회원가입 후 해당 마이데이터사업자의 서비스앱에 로그인하여 전송요구할 정보제공자를 선택
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">② (마이데이터사업자)</span> 인가코드 발급을 요청(개별인증-001 API 호출)
                    </div>
                </div>

                <!-- 개별인증-001 API -->
                <table class="spec-table">
                    <tbody>
                        <tr><th style="width: 20%;">API ID</th><td>개별인증-001</td></tr>
                        <tr><th>API명 (URI)</th><td>/oauth/2.0/authorize</td></tr>
                        <tr><th>API 설명</th><td>인가코드 발급 (정보제공API 호출에 필요한 접근토큰 발급 시 필요)</td></tr>
                        <tr><th>API 제공자</th><td>정보제공자</td></tr>
                        <tr><th>요청 정보</th><td>서비스 자격증명</td></tr>
                        <tr><th>응답 정보</th><td>인가코드 (⑧에서 회신)</td></tr>
                    </tbody>
                </table>

                <div class="spec-scenario">
                    <div class="spec-scenario-step">
                        <span class="step-label">③ (정보제공자)</span> 개별인증을 위한 인증화면을 웹뷰 등으로 제공
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">④ (정보주체)</span> 제공된 개별인증 화면을 통해 인증을 수행
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">⑤ (정보제공자)</span> 전달받은 인증정보 검증 등 개별인증 수행
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">⑥ (정보제공자)</span> 개인신용정보 전송요구 또는 전송요구 변경 화면을 웹뷰 등으로 제공
                        <span class="step-detail">- 정보제공자는 신용정보법 제33조의2제5항에 의거하여 정보주체가 전송요구 내역을 특정할 수 있도록 화면 구성 필요</span>
                    </div>
                </div>

                <!-- 전송요구 특정 사항 테이블 -->
                <table class="spec-table">
                    <thead>
                        <tr>
                            <th>특정 사항</th>
                            <th>정보주체 선택 항목</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>정기적 전송을 요구하는지 여부 및 요구 시 그 주기</td><td>정기적 전송 요구 여/부 선택, 주기</td></tr>
                        <tr><td>전송요구의 종료시점</td><td>전송요구의 종료시점</td></tr>
                        <tr><td>전송을 요구하는 목적</td><td>전송을 요구하는 목적</td></tr>
                        <tr><td>전송을 요구하는 개인신용정보의 보유기간</td><td>마이데이터사업자가 수집한 정보를 보유할 수 있는 기간</td></tr>
                        <tr><td>전송을 요구하는 개인신용정보</td><td>업권별 상이</td></tr>
                    </tbody>
                </table>

                <div class="spec-scenario">
                    <div class="spec-scenario-step">
                        <span class="step-label">⑦ (정보주체)</span> 제공된 개인신용정보 전송요구 화면을 통해 전송요구 내역 선택 및 정보제공자에게 전송
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">⑧ (정보제공자)</span> 전송요구 내역을 저장하고, 인가코드를 생성하여 state(상태값)와 함께 회신
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">⑨ (마이데이터사업자)</span> state(상태값) 검증 후 리다이렉트
                    </div>
                </div>
            </div>

            <!-- ⓑ 접근토큰 발급 상세 -->
            <div class="spec-item" style="margin-top: 24px;">
                <p class="spec-item-title"><strong>ⓑ 접근토큰 발급</strong></p>

                <p class="spec-item-desc">
                    마이데이터사업자 : 정보제공자로부터 전달받은 인가코드 및 종합포털로부터 발급받은 "서비스 자격증명"(client_id, client_secret) 등을 이용하여 정보제공자가 발급한 접근토큰을 획득(개별인증-002 API 호출)
                </p>

                <!-- 개별인증-002 API -->
                <table class="spec-table">
                    <tbody>
                        <tr><th style="width: 20%;">API ID</th><td>개별인증-002</td></tr>
                        <tr><th>API명 (URI)</th><td>/oauth/2.0/token</td></tr>
                        <tr><th>API 설명</th><td>정보제공API 호출을 위한 접근토큰 발급</td></tr>
                        <tr><th>API 제공자</th><td>정보제공자</td></tr>
                        <tr><th>요청 정보</th><td>인가코드, 서비스 자격증명, redirect_URI 등</td></tr>
                        <tr><th>응답 정보</th><td>접근토큰, scope 등</td></tr>
                    </tbody>
                </table>

                <p class="spec-note">
                    - 마이데이터사업자가 다음 단계인 "개인신용정보 전송요구 내역 조회"를 수행하기 위해서는 scope에 해당 업권의 "자산목록 scope"가 포함되어 있어야 함
                </p>
            </div>

            <!-- ⓒ 개인신용정보 전송요구 내역 조회 -->
            <div class="spec-item" style="margin-top: 24px;">
                <p class="spec-item-title"><strong>ⓒ 개인신용정보 전송요구 내역 조회</strong></p>

                <p class="spec-item-desc">
                    개별인증의 특성상 마이데이터사업자는 전송요구 내역을 알 수 없어 정보제공자를 대상으로 전송요구 내역 조회 필요
                </p>

                <p class="spec-item-desc" style="margin-top: 12px;">
                    <strong>1.</strong> 마이데이터사업자는 "전송을 요구하는 개인신용정보"를 제외한 개인신용정보 전송내역 특정 사항들을 정보제공자로부터 회신(정보제공-공통-002 API 호출)
                </p>

                <!-- 정보제공-공통-002 API -->
                <table class="spec-table">
                    <tbody>
                        <tr><th style="width: 20%;">API ID</th><td>정보제공-공통-002</td></tr>
                        <tr><th>API명 (URI)</th><td>/consents</td></tr>
                        <tr><th>API 설명</th><td>개인신용정보 전송요구 특정사항 회신</td></tr>
                        <tr><th>API 제공자</th><td>정보제공자</td></tr>
                        <tr><th>요청 정보</th><td>접근토큰</td></tr>
                        <tr><th>응답 정보</th><td>정기적 전송 여부 및 주기, 전송요구의 종료시점, 전송 목적, 보유기간</td></tr>
                    </tbody>
                </table>

                <p class="spec-item-desc" style="margin-top: 16px;">
                    <strong>2.</strong> 마이데이터사업자는 일부 "전송을 요구하는 개인신용정보"를 접근토큰 발급 시 회신받은 scope를 통해 확인 가능
                </p>

                <p class="spec-item-desc" style="margin-top: 16px;">
                    <strong>3.</strong> 마이데이터사업자는 scope로 전송요구 내역 확인이 불가한 "전송을 요구하는 개인신용정보" 내역을 정보제공자로부터 회신 (자산별 전송요구 여부(is_consent) 값을 통해 전송요구 내역 확인 가능)
                </p>
                <p class="spec-note">- 업권별 자산목록 조회 API를 호출하여 전송요구 내역을 확인</p>
            </div>

            <hr class="spec-divider">

            <!-- 3.2.1.2 개인신용정보 전송요구 철회 -->
            <h4 class="spec-subsection-title" style="font-size: 1rem;">3.2.1.2 개인신용정보 전송요구 철회</h4>

            <div class="spec-item">
                <p class="spec-item-desc">
                    정보주체가 마이데이터사업자의 서비스앱을 통해 전송요구를 철회하는 경우, 마이데이터사업자는 해당 정보제공자에게 접근토큰을 폐기할 것을 즉시 요청(개별인증-004 API 호출)
                </p>

                <!-- 개별인증-004 API -->
                <table class="spec-table">
                    <tbody>
                        <tr><th style="width: 20%;">API ID</th><td>개별인증-004</td></tr>
                        <tr><th>API명 (URI)</th><td>/oauth/2.0/revoke</td></tr>
                        <tr><th>API 설명</th><td>접근토큰 폐기</td></tr>
                        <tr><th>API 제공자</th><td>정보제공자</td></tr>
                        <tr><th>요청 정보</th><td>폐기하고자 하는 토큰, 자격증명 등</td></tr>
                        <tr><th>응답 정보</th><td>-</td></tr>
                    </tbody>
                </table>
            </div>

            <hr class="spec-divider">

            <!-- 3.2.2 통합인증 시 -->
            <h4 class="spec-subsection-title">3.2.2 통합인증 시</h4>

            <div class="spec-item">
                <div class="spec-term-box">
                    <p class="spec-term-name">통합인증방식</p>
                    <p class="spec-term-desc">정보주체가 마이데이터 서비스를 이용하기 위해, 통합인증기관으로부터 발급받은 통합인증 수단을 이용하여 1회 인증으로 다수 정보제공자에게 개인신용정보 전송요구권 행사 및 인증을 동시에 수행하는 방식</p>

                    <p class="spec-term-name" style="margin-top: 12px;">통합인증기관</p>
                    <p class="spec-term-desc">다수 정보제공자가 정보주체를 공통적으로 식별 및 인증하는데 필요한 식별정보(연계정보(CI))를 적법하게 제공 가능한 기관 중에 충분한 보안 수준 등을 갖춰 통합인증기관으로 참여한 기관</p>

                    <p class="spec-term-name" style="margin-top: 12px;">통합인증수단, 통합인증서</p>
                    <p class="spec-term-desc">통합인증기관으로 참여한 인증서 본인확인기관이 발급한 인증서 본인확인수단(공동인증서(범용, 은행, 증권), 금융인증서 등)</p>
                </div>
            </div>

            <h4 class="spec-subsection-title" style="font-size: 1rem;">3.2.2.1 개인신용정보 전송요구 또는 전송요구 변경</h4>

            <div class="spec-item">
                <p class="spec-item-desc">
                    정보주체가 통합인증 방식을 통하여 정보제공자로 하여금 본인의 개인신용정보를 마이데이터사업자에게 전송해줄 것을 요구하기 위해서는 다음과 같은 절차를 거침
                </p>

                <div class="spec-term-box" style="margin-top: 16px;">
                    <p class="spec-term-name">ⓐ 접근토큰 발급 (자산목록 조회 목적)</p>
                    <p class="spec-term-desc">
                        마이데이터사업자는 정보제공자 선택화면을 제공하고, 정보주체는 전송을 요구하고자 하는 정보제공자를 선택(복수 개 선택 가능). 정보주체는 통합인증수단을 이용하여 인증정보를 생성하고, 마이데이터사업자는 이를 이용하여 각 정보제공자에게 접근토큰 발급을 요청
                    </p>
                </div>

                <div class="spec-term-box" style="margin-top: 8px;">
                    <p class="spec-term-name">ⓑ 보유 자산목록 조회</p>
                    <p class="spec-term-desc">마이데이터사업자는 발급된 접근토큰을 이용하여 각 정보제공자로부터 정보주체가 보유한 자산목록을 조회</p>
                </div>

                <div class="spec-term-box" style="margin-top: 8px;">
                    <p class="spec-term-name">ⓒ 접근토큰 발급 (자산별 개인신용정보 조회 목적)</p>
                    <p class="spec-term-desc">
                        마이데이터사업자는 자산 선택화면을 제공하고, 정보주체는 자산을 선택 후 통합인증수단을 이용하여 인증정보를 생성. 마이데이터사업자는 이를 이용하여 각 정보제공자에게 접근토큰 발급을 요청하고, 정보제공자는 scope를 설정하여 접근토큰을 발급
                    </p>
                </div>

                <p class="spec-note" style="margin-top: 12px;">
                    ※ 통합인증 방식에서는 개별인증 절차 중 '인가코드 발급', '개인신용정보 전송요구 내역 조회' 절차가 불필요
                </p>
            </div>

            <!-- ⓐ 접근토큰 발급 (자산목록 조회 목적) 상세 -->
            <div class="spec-item" style="margin-top: 24px;">
                <p class="spec-item-title"><strong>ⓐ 접근토큰 발급 (자산목록 조회 목적)</strong></p>

                <div class="spec-scenario">
                    <div class="spec-scenario-step">
                        <span class="step-label">① (정보주체)</span> 마이데이터사업자 회원가입 후 서비스앱에 로그인하여 인증방식으로 통합인증을 선택
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">② (정보주체)</span> 통합인증을 위해 필요한 인증 이용 약관(개인정보 제공 및 활용 동의약관 등)을 확인 및 동의
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">③ (정보주체)</span> 서비스앱을 통해 전송요구할 대상 정보제공자를 선택하고, 전송요구 내역을 특정(선택)
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">④ (마이데이터사업자)</span> 인증 이용 동의, 전송요구내역에 대하여 정보주체가 통합인증수단을 이용하여 전자서명을 생성할 수 있도록 인증 모듈을 호출(전자서명 요청)
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">⑤ (정보주체)</span> 인증 이용 동의, 전송요구내역에 대한 전자서명 생성을 위해 인증서 비밀번호 등을 입력
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">⑥ (마이데이터사업자)</span> 인증 모듈 등으로부터 인증 이용 동의, 전송요구내역에 대한 전자서명 결과를 수신
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">⑦ (마이데이터사업자)</span> 전자서명 결과 값과 "서비스 자격증명" 등을 이용하여 각 정보제공자에게 병렬적으로 접근토큰을 요청(통합인증-002 API)
                    </div>
                </div>

                <!-- 통합인증-002 API -->
                <table class="spec-table">
                    <tbody>
                        <tr><th style="width: 20%;">API ID</th><td>통합인증-002</td></tr>
                        <tr><th>API명 (URI)</th><td>/oauth/2.0/token</td></tr>
                        <tr><th>API 설명</th><td>자산목록 조회 API, 정보제공API 호출을 위한 접근토큰 발급</td></tr>
                        <tr><th>API 제공자</th><td>정보제공자</td></tr>
                        <tr><th>요청 정보</th><td>서비스 자격증명, 전자서명(인증 이용 동의), 전자서명(전송요구내역) 등</td></tr>
                        <tr><th>응답 정보</th><td>접근토큰, scope 등</td></tr>
                    </tbody>
                </table>

                <div class="spec-scenario">
                    <div class="spec-scenario-step">
                        <span class="step-label">⑧ (정보제공자)</span> 전송요구내역에 대한 전자서명 결과 값을 검증
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">⑨ (정보제공자)</span> 인증 이용 동의에 대한 전자서명 결과 값과 접근토큰 등을 이용하여 통합인증기관에 본인확인(CI 정보 등)을 요청(통합인증-003 API)
                    </div>
                </div>

                <!-- 통합인증-003 API -->
                <table class="spec-table">
                    <tbody>
                        <tr><th style="width: 20%;">API ID</th><td>통합인증-003</td></tr>
                        <tr><th>API명 (URI)</th><td>/ca_verification</td></tr>
                        <tr><th>API 설명</th><td>통합인증기관에 정보주체에 대한 본인확인(CI 정보 등)을 요청</td></tr>
                        <tr><th>API 제공자</th><td>통합인증기관</td></tr>
                        <tr><th>요청 정보</th><td>접근토큰, 전자서명(인증 이용 동의) 등</td></tr>
                        <tr><th>응답 정보</th><td>CI 정보 등</td></tr>
                    </tbody>
                </table>

                <div class="spec-scenario">
                    <div class="spec-scenario-step">
                        <span class="step-label">⑩ (통합인증기관)</span> 인증 이용 동의에 대한 전자서명 결과 값을 검증하고, 그 결과로서 본인확인 결과(CI 등)를 정보제공자에게 제공
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">⑪ (정보제공자)</span> 전자서명 결과 값, 본인확인 결과를 토대로 정보주체를 인증한 후에 접근토큰을 발급하여 마이데이터사업자에게 제공
                    </div>
                </div>
            </div>

            <!-- ⓑ 보유 자산목록 조회 -->
            <div class="spec-item" style="margin-top: 24px;">
                <p class="spec-item-title"><strong>ⓑ 보유 자산목록 조회</strong></p>
                <p class="spec-item-desc">
                    (마이데이터사업자) 정보제공자로부터 획득한 접근토큰을 통해 업권별 자산목록 조회 관련 API를 호출하여 정보주체가 보유한 자산목록을 조회
                </p>
                <p class="spec-note">- 업권별 자산목록 조회 API는 '3.2.1.1. - ⓒ - 3'과 동일</p>
            </div>

            <!-- ⓒ 접근토큰 발급(자산별) -->
            <div class="spec-item" style="margin-top: 24px;">
                <p class="spec-item-title"><strong>ⓒ 접근토큰 발급 (자산별 개인신용정보 조회 목적)</strong></p>
                <p class="spec-item-desc">
                    본 단계는 'ⓐ 접근토큰 발급(자산목록 조회 목적)'과 대체로 동일하며, 자산 선택화면에서 정보주체가 전송요구할 자산을 특정(선택)하면 전송요구 scope가 결정됩니다.
                </p>
                <p class="spec-note">
                    - scope에 해당 업권의 "자산목록 scope" 이외에도 "전송요구 scope"가 포함되어 있어야 함
                </p>
            </div>

            <hr class="spec-divider">

            <!-- 3.2.2.2 개인신용정보 전송요구 철회 -->
            <h4 class="spec-subsection-title" style="font-size: 1rem;">3.2.2.2 개인신용정보 전송요구 철회</h4>
            <div class="spec-item">
                <p class="spec-item-desc">"3.2.1.2. 개인신용정보 전송요구 철회"와 동일</p>
            </div>

            <hr class="spec-divider">

            <!-- ==================== 3.3 개인신용정보 전송 ==================== -->
            <h3 class="spec-section-title">3.3 개인신용정보 전송</h3>

            <!-- 비정기적 전송 -->
            <div class="spec-item">
                <p class="spec-item-title"><strong>□ 정보주체 개입 (비정기적 전송)</strong></p>

                <div class="spec-scenario">
                    <div class="spec-scenario-step">
                        <span class="step-label">① (정보주체)</span> 마이데이터사업자의 서비스앱에 접속하여 자산정보, 거래내역 등 조회
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">② (마이데이터사업자)</span> 정보제공자로부터 발급받은 접근토큰을 이용하여 업권별 정보제공 API를 호출
                    </div>
                    <div class="spec-scenario-step">
                        <span class="step-label">③ (정보제공자)</span> 접근토큰 유효성과 요청 대상 정보의 정당성을 검증한 후 마이데이터사업자가 요청한 정보를 회신
                    </div>
                </div>
            </div>

            <!-- 정기적 전송 -->
            <div class="spec-item" style="margin-top: 24px;">
                <p class="spec-item-title"><strong>□ 정보주체 미개입 (정기적 전송)</strong></p>

                <div class="spec-scenario">
                    <div class="spec-scenario-step">
                        <span class="step-label">① (마이데이터사업자)</span> 정보제공자로부터 발급받은 접근토큰을 이용하여 업권별 정보제공 API를 호출
                        <span class="step-detail">- 정기적 전송 여부를 구분하기 위한 헤더 값("x-api-type: scheduled")을 반드시 설정</span>
                        <span class="step-detail">- 정기적 전송주기는 송·수신되는 정보의 특성에 따라 기본정보 또는 추가정보로 분류</span>
                    </div>
                </div>

                <!-- 정기적 전송주기 분류 테이블 -->
                <table class="spec-table">
                    <thead>
                        <tr>
                            <th style="width: 15%;">분류</th>
                            <th>설명</th>
                            <th style="width: 15%;">주기</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>기본</td>
                            <td class="left">생성/수정/삭제가 빈번하게 발생하지 않는 정보 (예: 상품정보, 가입정보 등)를 송·수신하는 API</td>
                            <td>주 1회</td>
                        </tr>
                        <tr>
                            <td>추가</td>
                            <td class="left">생성/수정/삭제가 빈번하게 발생하는 정보 (예: 잔액, 거래내역 등)를 송·수신하는 API</td>
                            <td>일 1회</td>
                        </tr>
                    </tbody>
                </table>

                <div class="spec-scenario">
                    <div class="spec-scenario-step">
                        <span class="step-label">② (정보제공자)</span> 접근토큰 유효성과 요청 대상 정보의 정당성을 검증한 후 마이데이터사업자가 요청한 정보를 회신
                    </div>
                </div>
            </div>

        </div>
    </div>
</main>
</body>
</html>
