<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default-layout}">
<head>
    <title>ë¬¸ì˜ ìƒì„¸</title>
    <th:block layout:fragment="css">
        <link rel="stylesheet" th:href="@{/css/sub-page.css}">
        <link rel="stylesheet" th:href="@{/css/sidebar.css}">
        <style>
            .inquiry-view {
                border-top: 2px solid #1e3a5f;
            }
            .inquiry-header {
                padding: 24px;
                background-color: #f8f9fa;
                border-bottom: 1px solid #e9ecef;
            }
            .inquiry-title {
                font-size: 1.25rem;
                font-weight: 600;
                color: #1a1a1a;
                margin-bottom: 12px;
            }
            .inquiry-meta {
                display: flex;
                flex-wrap: wrap;
                gap: 20px;
                font-size: 0.875rem;
                color: #6c757d;
            }
            .inquiry-meta span {
                display: flex;
                align-items: center;
                gap: 6px;
            }
            .inquiry-content {
                padding: 32px 24px;
                min-height: 200px;
                border-bottom: 1px solid #e9ecef;
                line-height: 1.8;
                white-space: pre-wrap;
            }
            .answer-section {
                background-color: #f0f7ff;
                border: 1px solid #b6d4fe;
                border-radius: 8px;
                margin: 24px;
                overflow: hidden;
            }
            .answer-header {
                display: flex;
                align-items: center;
                justify-content: space-between;
                padding: 16px 20px;
                background-color: #e7f1ff;
                border-bottom: 1px solid #b6d4fe;
            }
            .answer-header h3 {
                font-size: 1rem;
                font-weight: 600;
                color: #0d6efd;
                margin: 0;
            }
            .answer-meta {
                font-size: 0.875rem;
                color: #6c757d;
            }
            .answer-content {
                padding: 20px;
                line-height: 1.8;
                white-space: pre-wrap;
            }
            .waiting-answer {
                padding: 40px 24px;
                text-align: center;
                color: #6c757d;
                background-color: #f8f9fa;
                margin: 24px;
                border-radius: 8px;
            }
            .waiting-answer .icon {
                font-size: 2.5rem;
                margin-bottom: 12px;
            }
            .inquiry-nav {
                display: flex;
                justify-content: center;
                gap: 8px;
                padding: 24px;
            }
        </style>
    </th:block>
</head>
<body>
<main layout:fragment="content">
    <!-- í˜ì´ì§€ ë°°ë„ˆ -->
    <th:block th:replace="~{fragments/page-banner :: page-banner('ê³ ê°ì§€ì›', 'ë§ˆì´ë°ì´í„° í…ŒìŠ¤íŠ¸ë² ë“œ ë¬¸ì˜í•˜ê¸°')}"></th:block>

    <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
    <th:block th:replace="~{fragments/breadcrumb :: breadcrumb(${breadcrumbItems})}"></th:block>

    <!-- ì„œë¸Œ í˜ì´ì§€ ë ˆì´ì•„ì›ƒ -->
    <div class="sub-page-layout">
        <!-- ì‚¬ì´ë“œë°” -->
        <th:block th:replace="~{layout/sidebar :: sidebar('ê³ ê°ì§€ì›', ${sidebarMenus}, ${currentMenu})}"></th:block>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="sub-page-main">
            <h2 class="content-title">ë¬¸ì˜ ìƒì„¸</h2>

            <!-- ë¬¸ì˜ ìƒì„¸ -->
            <article class="inquiry-view">
                <!-- ë¬¸ì˜ í—¤ë” -->
                <div class="inquiry-header">
                    <h3 class="inquiry-title" th:text="${inquiry.title}">ë¬¸ì˜ ì œëª©</h3>
                    <div class="inquiry-meta">
                        <span>
                            <strong>ì‘ì„±ì:</strong> 
                            <span th:text="${inquiry.memberName}">í™ê¸¸ë™</span>
                        </span>
                        <span>
                            <strong>ë“±ë¡ì¼:</strong> 
                            <span th:text="${#temporals.format(inquiry.createdAt, 'yyyy.MM.dd HH:mm')}">2025.01.17 10:30</span>
                        </span>
                        <span>
                            <strong>ìƒíƒœ:</strong>
                            <span class="badge" 
                                  th:classappend="${inquiry.status.name() == 'WAITING'} ? 'badge-secondary' : 'badge-success'"
                                  th:text="${inquiry.statusDisplayName}">ëŒ€ê¸°</span>
                        </span>
                    </div>
                </div>

                <!-- ë¬¸ì˜ ë‚´ìš© -->
                <div class="inquiry-content" th:text="${inquiry.content}">
                    ë¬¸ì˜ ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤.
                </div>

                <!-- ë‹µë³€ ì„¹ì…˜ (ë‹µë³€ ì™„ë£Œ ì‹œ) -->
                <div class="answer-section" th:if="${inquiry.answer != null}">
                    <div class="answer-header">
                        <h3>ğŸ’¬ ë‹µë³€</h3>
                        <div class="answer-meta">
                            <span th:if="${inquiry.answererName}" th:text="${inquiry.answererName}">ê´€ë¦¬ì</span>
                            <span th:text="' | ' + ${#temporals.format(inquiry.answeredAt, 'yyyy.MM.dd HH:mm')}"> | 2025.01.18 14:00</span>
                        </div>
                    </div>
                    <div class="answer-content" th:text="${inquiry.answer}">
                        ë‹µë³€ ë‚´ìš©ì´ í‘œì‹œë©ë‹ˆë‹¤.
                    </div>
                </div>

                <!-- ë‹µë³€ ëŒ€ê¸° ì¤‘ (ë¯¸ë‹µë³€ ì‹œ) -->
                <div class="waiting-answer" th:if="${inquiry.answer == null}">
                    <div class="icon">â³</div>
                    <p>ë‹µë³€ì„ ê¸°ë‹¤ë¦¬ê³  ìˆìŠµë‹ˆë‹¤.<br>ë¹ ë¥¸ ì‹œì¼ ë‚´ì— ë‹µë³€ ë“œë¦¬ê² ìŠµë‹ˆë‹¤.</p>
                </div>

                <!-- ë²„íŠ¼ ì˜ì—­ -->
                <div class="inquiry-nav">
                    <a th:href="@{/support/inquiry/list}" class="btn btn-secondary">ëª©ë¡ìœ¼ë¡œ</a>
                    <a th:href="@{/support/inquiry}" class="btn btn-primary">ìƒˆ ë¬¸ì˜ ì‘ì„±</a>
                </div>
            </article>
        </div>
    </div>
</main>
</body>
</html>
