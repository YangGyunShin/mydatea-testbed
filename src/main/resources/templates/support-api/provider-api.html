<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/default-layout}">
<head>
    <title>지원 API(마이데이터사업자/정보제공자 제공)</title>
    <th:block layout:fragment="css">
        <link rel="stylesheet" th:href="@{/css/sub-page.css}">
        <link rel="stylesheet" th:href="@{/css/sidebar.css}">
        <link rel="stylesheet" th:href="@{/css/api-guide.css}">
    </th:block>
</head>
<body>
<main layout:fragment="content">
    <!-- 페이지 배너 -->
    <th:block th:replace="~{fragments/page-banner :: page-banner('API가이드', '금융분야 마이데이터 표준 API 규격을 안내합니다')}"></th:block>

    <!-- 브레드크럼 -->
    <th:block th:replace="~{fragments/breadcrumb :: breadcrumb(${breadcrumbItems})}"></th:block>

    <!-- 서브 페이지 레이아웃 -->
    <div class="sub-page-layout">
        <!-- 사이드바 (아코디언) -->
        <th:block th:replace="~{layout/sidebar-api-spec :: sidebar-api-spec(${activeGroup}, ${currentMenu})}"></th:block>

        <!-- 메인 콘텐츠 -->
        <div class="sub-page-main">
            <h2 class="content-title">지원 API(마이데이터사업자/정보제공자 제공)</h2>

            <!-- Table of Contents -->
            <div class="api-toc">
                <h4 class="api-toc-title">Table of Contents</h4>
                <ul class="api-toc-list">
                    <li><a href="#support-101-v0">접근토큰 발급 (지원API 제공용) <span class="api-version-badge">v0</span></a></li>
                    <li><a href="#support-102-v1">정보제공자 상태 조회 <span class="api-version-badge v2">v1</span></a></li>
                    <li><a href="#support-103-v1">정보주체 별 전송요구 내역 조회 <span class="api-version-badge v2">v1</span></a></li>
                    <li><a href="#support-104-v1">통계자료 재전송 요청 <span class="api-version-badge v2">v1</span></a></li>
                </ul>
            </div>

            <!-- ==================== 지원-101 v0 ==================== -->
            <div class="api-spec-card" id="support-101-v0">
                <div class="api-spec-header">
                    <h3 class="api-spec-title">접근토큰 발급 (지원API 제공용)</h3>
                    <div class="api-spec-meta">
                        <span class="api-version-badge">v0</span>
                        <span class="api-date">2025-10-30</span>
                    </div>
                </div>

                <!-- 기본 정보 -->
                <h4 class="api-sub-title">기본 정보</h4>
                <table class="spec-table">
                    <tbody>
                        <tr><td class="info-label">API ID</td><td>지원-101</td><td class="info-label">HTTP Method</td><td><span class="method-badge post">POST</span></td></tr>
                        <tr><td class="info-label">API 제공자</td><td>마이데이터사업자, 정보제공자</td><td class="info-label">API 요청자</td><td>종합포털</td></tr>
                        <tr><td class="info-label">API 명 (URI)</td><td colspan="3"><code>/mgmts/oauth/2.0/token</code></td></tr>
                        <tr><td class="info-label">설명</td><td colspan="3">종합포털이 마이데이터사업자, 정보제공자 또는 중계기관에게 접근토큰 발급을 요청(종합포털이 사전에 공유한 '종합포털 자격증명'을 이용하여 검증)<br>- 중계기관을 이용하는 기관의 경우, 중계기관이 '종합포털 자격증명'을 검증한 후 접근토큰을 대표로 하나만 발급해줌<br>- 따라서 중계기관도 종합포털에 기관 등록 및 자격증명 발급 필요</td></tr>
                        <tr><td class="info-label">기준시점</td><td>현재 시점</td><td class="info-label">Content-Type (요청)</td><td>application/x-www-form-urlencoded</td></tr>
                        <tr><td class="info-label">Content-Type (응답)</td><td colspan="3">application/json; charset=UTF-8</td></tr>
                    </tbody>
                </table>

                <!-- 요청 메시지 명세 -->
                <h4 class="api-sub-title">요청 메시지 명세</h4>
                <table class="spec-table api-msg-table">
                    <thead>
                        <tr>
                            <th style="width:8%">HTTP</th>
                            <th style="width:16%">항목명</th>
                            <th style="width:16%">항목설명</th>
                            <th style="width:5%">필수</th>
                            <th style="width:12%">타입(길이)</th>
                            <th>설명(비고)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Header</td><td>x-api-tran-id</td><td>거래고유번호</td><td>Y</td><td>AN(25)</td><td class="left">거래고유번호</td></tr>
                        <tr><td rowspan="4">Body</td><td>grant_type</td><td>권한부여방식</td><td>Y</td><td>aNS(18)</td><td class="left">권한부여 방식('client_credentials' 고정값)</td></tr>
                        <tr><td>client_id</td><td>클라이언트 ID</td><td>Y</td><td>aN(50)</td><td class="left">종합포털이 사전에 공유한 종합포털 자격증명의 클라이언트 식별값</td></tr>
                        <tr><td>client_secret</td><td>클라이언트 Secret</td><td>Y</td><td>aN(50)</td><td class="left">종합포털이 사전에 공유한 종합포털 자격증명의 클라이언트 Secret 값</td></tr>
                        <tr><td>scope</td><td>권한 범위</td><td>Y</td><td>a(6)</td><td class="left">고정값 : 'manage'</td></tr>
                    </tbody>
                </table>

                <!-- 응답 메시지 명세 -->
                <h4 class="api-sub-title">응답 메시지 명세</h4>
                <table class="spec-table api-msg-table">
                    <thead>
                        <tr>
                            <th style="width:8%">HTTP</th>
                            <th style="width:16%">항목명</th>
                            <th style="width:16%">항목설명</th>
                            <th style="width:5%">필수</th>
                            <th style="width:12%">타입(길이)</th>
                            <th>설명(비고)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Header</td><td>x-api-tran-id</td><td>거래고유번호</td><td>Y</td><td>AN(25)</td><td class="left">거래고유번호</td></tr>
                        <tr><td rowspan="4">Body</td><td>token_type</td><td>접근토큰 유형</td><td>Y</td><td>a(6)</td><td class="left">접근토큰 유형<br>- ('Bearer' 고정값)</td></tr>
                        <tr><td>access_token</td><td>접근토큰</td><td>Y</td><td>aNS(1500)</td><td class="left">각 기관이 발급한 접근토큰</td></tr>
                        <tr><td>expires_in</td><td>접근토큰 유효기간</td><td>Y</td><td>N(9)</td><td class="left">접근토큰 유효기간(단위 : 초)</td></tr>
                        <tr><td>scope</td><td>권한 범위</td><td>Y</td><td>a(6)</td><td class="left">고정값 : manage</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- ==================== 지원-102 v1 ==================== -->
            <div class="api-spec-card" id="support-102-v1">
                <div class="api-spec-header">
                    <h3 class="api-spec-title">정보제공자 상태 조회</h3>
                    <div class="api-spec-meta">
                        <span class="api-version-badge v2">v1</span>
                        <span class="api-date">2025-10-30</span>
                    </div>
                </div>

                <!-- 기본 정보 -->
                <h4 class="api-sub-title">기본 정보</h4>
                <table class="spec-table">
                    <tbody>
                        <tr><td class="info-label">API ID</td><td>지원-102</td><td class="info-label">HTTP Method</td><td><span class="method-badge get">GET</span></td></tr>
                        <tr><td class="info-label">API 제공자</td><td>정보제공자</td><td class="info-label">API 요청자</td><td>종합포털</td></tr>
                        <tr><td class="info-label">API 명 (URI)</td><td colspan="3"><code>/v1/mgmts/status</code></td></tr>
                        <tr><td class="info-label">설명</td><td colspan="3">마이데이터사업자가 종합포털에서 요청 시, 종합포털은 본 API를 호출하여 정보제공자로부터 API서버 가용여부 조회</td></tr>
                        <tr><td class="info-label">기준시점</td><td>현재 시점</td><td class="info-label">Content-Type (요청)</td><td>-</td></tr>
                        <tr><td class="info-label">Content-Type (응답)</td><td colspan="3">application/json; charset=UTF-8</td></tr>
                    </tbody>
                </table>

                <!-- 요청 메시지 명세 -->
                <h4 class="api-sub-title">요청 메시지 명세</h4>
                <table class="spec-table api-msg-table">
                    <thead>
                        <tr>
                            <th style="width:8%">HTTP</th>
                            <th style="width:16%">항목명</th>
                            <th style="width:16%">항목설명</th>
                            <th style="width:5%">필수</th>
                            <th style="width:12%">타입(길이)</th>
                            <th>설명(비고)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td rowspan="2">Header</td><td>Authorization</td><td>접근토큰</td><td>Y</td><td>aNS(1500)</td><td class="left">발급한 접근토큰<br>- 접근토큰 유형(Bearer)을 명시<br>예) Authorization: Bearer 접근토큰</td></tr>
                        <tr><td>x-api-tran-id</td><td>거래고유번호</td><td>Y</td><td>AN(25)</td><td class="left">거래고유번호</td></tr>
                        <tr><td>Parameter</td><td>org_code</td><td>기관코드</td><td>Y</td><td>aN(10)</td><td class="left">조회할 기관의 기관코드 (중계기관 호출 시 필요하나, 자체API 구축 기관의 경우도 본인 기관 요청 여부를 한 번 더 검증하기 위해 필수로 지정)</td></tr>
                    </tbody>
                </table>

                <!-- 응답 메시지 명세 -->
                <h4 class="api-sub-title">응답 메시지 명세</h4>
                <table class="spec-table api-msg-table">
                    <thead>
                        <tr>
                            <th style="width:8%">HTTP</th>
                            <th style="width:16%">항목명</th>
                            <th style="width:16%">항목설명</th>
                            <th style="width:5%">필수</th>
                            <th style="width:12%">타입(길이)</th>
                            <th>설명(비고)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Header</td><td>x-api-tran-id</td><td>거래고유번호</td><td>Y</td><td>AN(25)</td><td class="left">거래고유번호</td></tr>
                        <tr><td rowspan="3">Body</td><td>rsp_code</td><td>세부 응답코드</td><td>Y</td><td>aN(5)</td><td class="left"></td></tr>
                        <tr><td>rsp_msg</td><td>세부 응답메시지</td><td>Y</td><td>AH(450)</td><td class="left"></td></tr>
                        <tr><td>availability</td><td>API 서버 가용 여부</td><td>Y</td><td>aN(2)</td><td class="left">API 서버 가용 여부<br>- &lt;코드값&gt;<br>01 : 정상<br>02 : 장애<br>03 : 시스템 점검<br>99 : 기타</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- ==================== 지원-103 v1 ==================== -->
            <div class="api-spec-card" id="support-103-v1">
                <div class="api-spec-header">
                    <h3 class="api-spec-title">정보주체 별 전송요구 내역 조회</h3>
                    <div class="api-spec-meta">
                        <span class="api-version-badge v2">v1</span>
                        <span class="api-date">2025-10-30</span>
                    </div>
                </div>

                <!-- 기본 정보 -->
                <h4 class="api-sub-title">기본 정보</h4>
                <table class="spec-table">
                    <tbody>
                        <tr><td class="info-label">API ID</td><td>지원-103</td><td class="info-label">HTTP Method</td><td><span class="method-badge post">POST</span></td></tr>
                        <tr><td class="info-label">API 제공자</td><td>마이데이터사업자</td><td class="info-label">API 요청자</td><td>종합포털</td></tr>
                        <tr><td class="info-label">API 명 (URI)</td><td colspan="3"><code>/v1/mgmts/consents</code></td></tr>
                        <tr><td class="info-label">설명</td><td colspan="3">정보주체가 종합포털에서 요청 시, 종합포털은 본 API를 호출하여 마이데이터사업자로부터 전송 요구 내역을 조회<br>- 정보제공자별 전송 요구 내역을 List로 회신<br>- 현재 유효한 전송요구 내역만 회신</td></tr>
                        <tr><td class="info-label">기준시점</td><td>현재 시점</td><td class="info-label">Content-Type (요청)</td><td>application/json; charset=UTF-8</td></tr>
                        <tr><td class="info-label">Content-Type (응답)</td><td colspan="3">application/json; charset=UTF-8</td></tr>
                    </tbody>
                </table>

                <!-- 요청 메시지 명세 -->
                <h4 class="api-sub-title">요청 메시지 명세</h4>
                <table class="spec-table api-msg-table">
                    <thead>
                        <tr>
                            <th style="width:8%">HTTP</th>
                            <th style="width:16%">항목명</th>
                            <th style="width:16%">항목설명</th>
                            <th style="width:5%">필수</th>
                            <th style="width:12%">타입(길이)</th>
                            <th>설명(비고)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td rowspan="2">Header</td><td>Authorization</td><td>접근토큰</td><td>Y</td><td>aNS(1500)</td><td class="left">발급한 접근토큰<br>- 접근토큰 유형(Bearer)을 명시<br>예) Authorization: Bearer 접근토큰</td></tr>
                        <tr><td>x-api-tran-id</td><td>거래고유번호</td><td>Y</td><td>AN(25)</td><td class="left">거래고유번호</td></tr>
                        <tr><td rowspan="2">Body</td><td>org_code</td><td>기관코드</td><td>Y</td><td>aN(10)</td><td class="left">마이데이터사업자의 기관코드<br>- 지원 API로부터 배포</td></tr>
                        <tr><td>user_ci</td><td>정보주체 식별값</td><td>Y</td><td>B64(100)</td><td class="left">정보주체 식별을 위한 연계정보 (Connection Information)</td></tr>
                    </tbody>
                </table>

                <!-- 응답 메시지 명세 -->
                <h4 class="api-sub-title">응답 메시지 명세</h4>
                <table class="spec-table api-msg-table">
                    <thead>
                        <tr>
                            <th style="width:8%">HTTP</th>
                            <th style="width:16%">항목명</th>
                            <th style="width:16%">항목설명</th>
                            <th style="width:5%">필수</th>
                            <th style="width:12%">타입(길이)</th>
                            <th>설명(비고)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Header</td><td>x-api-tran-id</td><td>거래고유번호</td><td>Y</td><td>AN(25)</td><td class="left">거래고유번호</td></tr>
                        <tr><td rowspan="12">Body</td><td>rsp_code</td><td>세부 응답코드</td><td>Y</td><td>aN(5)</td><td class="left"></td></tr>
                        <tr><td>rsp_msg</td><td>세부 응답메시지</td><td>Y</td><td>AH(450)</td><td class="left"></td></tr>
                        <tr><td>is_member</td><td>회원 가입 여부</td><td>Y</td><td>Boolean</td><td class="left">해당 정보주체가 마이데이터사업자의 가입 고객인지 여부<br>- is_member = false인 경우, 아래 내용들 회신 안 함</td></tr>
                        <tr><td>service_cnt</td><td>서비스목록수</td><td>N</td><td>N(5)</td><td class="left">전송요구 대상 마이데이터 서비스 수<br>- 해당 마이데이터사업자가 복수개의 마이데이터서비스를 제공할 수 있기 때문에 List로 회신</td></tr>
                        <tr><td>service_list</td><td>서비스목록</td><td>N</td><td>Object</td><td class="left"></td></tr>
                        <tr><td class="indent-field">--client_id</td><td>클라이언트 ID</td><td>N</td><td>aN(50)</td><td class="left">종합포털에 마이데이터 서비스 등록 시 발급 받은 클라이언트 식별값</td></tr>
                        <tr><td class="indent-field">--consent_cnt</td><td>전송요구 내역 수</td><td>N</td><td>N(3)</td><td class="left">전송요구 내역 수</td></tr>
                        <tr><td class="indent-field">--consent_list</td><td>전송요구 내역 목록</td><td>N</td><td>Object</td><td class="left"></td></tr>
                        <tr><td class="indent-field">----org_code</td><td>기관코드</td><td>N</td><td>aN(10)</td><td class="left">정보제공자 기관코드</td></tr>
                        <tr><td class="indent-field">----scope</td><td>권한 범위</td><td>N</td><td>aNS(200)</td><td class="left">정보제공자가 발급한 접근토큰의 권한 범위(다중 scope 가능)<br>- 접근토큰 권한 범위(scope)를 통해 정보주체가 전송요구한 내역(중분류)을 확인 가능<br>- 전송요구 상세내역(예: 특정 계좌번호를 전송 요구했는지 등)은 종합포털에서 보여주지 않고, 각 마이데이터 사업자 App을 통해 조회</td></tr>
                        <tr><td class="indent-field">----consent_date</td><td>전송요구 일자</td><td>N</td><td>DATE</td><td class="left">정보주체가 전송요구한 일자</td></tr>
                        <tr><td class="indent-field">----consent_end_date</td><td>전송요구 종료 시점</td><td>N</td><td>DATE</td><td class="left">전송요구 종료 시점<br>- 정보제공-공통-002 "종료 시점(end_date)"과 동일한 값</td></tr>
                    </tbody>
                </table>
            </div>

            <!-- ==================== 지원-104 v1 ==================== -->
            <div class="api-spec-card" id="support-104-v1">
                <div class="api-spec-header">
                    <h3 class="api-spec-title">통계자료 재전송 요청</h3>
                    <div class="api-spec-meta">
                        <span class="api-version-badge v2">v1</span>
                        <span class="api-date">2025-10-30</span>
                    </div>
                </div>

                <!-- 기본 정보 -->
                <h4 class="api-sub-title">기본 정보</h4>
                <table class="spec-table">
                    <tbody>
                        <tr><td class="info-label">API ID</td><td>지원-104</td><td class="info-label">HTTP Method</td><td><span class="method-badge get">GET</span></td></tr>
                        <tr><td class="info-label">API 제공자</td><td>마이데이터사업자, 정보제공자</td><td class="info-label">API 요청자</td><td>종합포털</td></tr>
                        <tr><td class="info-label">API 명 (URI)</td><td colspan="3"><code>/v1/mgmts/req-statistics</code></td></tr>
                        <tr><td class="info-label">설명</td><td colspan="3">마이데이터사업자, 정보수신자 및 정보제공자는 통계자료를 종합포털에 집중하도록 하고 있으나(지원-004, 지원-005), 마이데이터사업자 또는 정보제공자가 API규격 오류, 전송 실패, 또는 잘못된 정보 집중 등 통계자료 집중이 정상적으로 이루어지지 않았을 경우 종합포털에서 재전송을 요청하기 위한 API<br>- 마이데이터사업자 또는 정보수신자는 본 API 수신 시, 지원-004 API를 이용하여 정보를 재전송<br>- 정보제공자는 본 API 수신 시, 지원-005 API를 이용하여 정보를 재전송</td></tr>
                        <tr><td class="info-label">기준시점</td><td>현재 시점</td><td class="info-label">Content-Type (요청)</td><td>-</td></tr>
                        <tr><td class="info-label">Content-Type (응답)</td><td colspan="3">application/json; charset=UTF-8</td></tr>
                    </tbody>
                </table>

                <!-- 요청 메시지 명세 -->
                <h4 class="api-sub-title">요청 메시지 명세</h4>
                <table class="spec-table api-msg-table">
                    <thead>
                        <tr>
                            <th style="width:8%">HTTP</th>
                            <th style="width:16%">항목명</th>
                            <th style="width:16%">항목설명</th>
                            <th style="width:5%">필수</th>
                            <th style="width:12%">타입(길이)</th>
                            <th>설명(비고)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td rowspan="2">Header</td><td>Authorization</td><td>접근토큰</td><td>Y</td><td>aNS(1500)</td><td class="left">발급한 접근토큰<br>- 접근토큰 유형(Bearer)을 명시<br>예) Authorization: Bearer 접근토큰</td></tr>
                        <tr><td>x-api-tran-id</td><td>거래고유번호</td><td>Y</td><td>AN(25)</td><td class="left">거래고유번호</td></tr>
                        <tr><td rowspan="4">Parameter</td><td>org_code</td><td>기관코드</td><td>Y</td><td>aN(10)</td><td class="left">API 제공자(마이데이터사업자, 정보수신자 또는 정보제공자)의 기관코드<br>- 지원 API로부터 배포</td></tr>
                        <tr><td>org_type</td><td>기관구분</td><td>Y</td><td>aN(2)</td><td class="left">종합포털이 통계자료 재전송을 요청하는 기관 구분<br>- &lt;코드값&gt;<br>01 : 마이데이터사업자<br>02 : 정보수신자<br>03 : 정보제공자</td></tr>
                        <tr><td>inquiry_date</td><td>재전송 기준일자</td><td>Y</td><td>DATE</td><td class="left">통계자료를 재전송할 기준일자<br>- 본 기준일자를 기준으로 직전 7일에 대한 통계자료 재전송<br>- 기준일자는 일요일로 한정</td></tr>
                        <tr><td>type</td><td>재전송 통계정보 구분</td><td>Y</td><td>N(1)</td><td class="left">0 : 목록 / 정기적 전송 / 비정기적 전송(정보주체 개입) 통계자료 모두 재전송 요청<br>1 : 정기적 전송 통계자료에 대한 재전송 요청<br>2 : 비정기적 전송(정보주체 개입) 통계자료에 대한 재전송 요청<br>3 : 목록 전송</td></tr>
                    </tbody>
                </table>

                <!-- 응답 메시지 명세 -->
                <h4 class="api-sub-title">응답 메시지 명세</h4>
                <table class="spec-table api-msg-table">
                    <thead>
                        <tr>
                            <th style="width:8%">HTTP</th>
                            <th style="width:16%">항목명</th>
                            <th style="width:16%">항목설명</th>
                            <th style="width:5%">필수</th>
                            <th style="width:12%">타입(길이)</th>
                            <th>설명(비고)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Header</td><td>x-api-tran-id</td><td>거래고유번호</td><td>Y</td><td>AN(25)</td><td class="left">거래고유번호</td></tr>
                        <tr><td rowspan="2">Body</td><td>rsp_code</td><td>세부 응답코드</td><td>Y</td><td>aN(5)</td><td class="left"></td></tr>
                        <tr><td>rsp_msg</td><td>세부 응답메시지</td><td>Y</td><td>AH(450)</td><td class="left"></td></tr>
                    </tbody>
                </table>
            </div>

        </div>
    </div>
</main>
</body>
</html>